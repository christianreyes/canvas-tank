Function.prototype.inheritsFrom=function(a){a.constructor==Function?(this.prototype=new a,this.prototype.constructor=this,this.prototype.parent=a.prototype):(this.prototype=a,this.prototype.constructor=this,this.prototype.parent=a);return this};function mergeObjects(a,c){var b={},d;for(d in a)b[d]=a[d];for(d in c)b[d]=c[d];return b}function mergeWithDefault(a,c){var b=defaultIfUndefined(a,c);return b=mergeObjects(c,a)}function defaultIfUndefined(a,c){return typeof a=="undefined"?c:a}
function Doodle(a){this.context=a;this.children=[]}Doodle.prototype.draw=function(){for(var a=0;a<this.children.length;a++)this.context.save(),this.children[a].draw(this.context),this.context.restore()};function Drawable(a){a=mergeWithDefault(a,{left:0,top:0,visible:true,theta:0});this.left=a.left;this.top=a.top;this.visible=a.visible;this.theta=a.theta}Drawable.prototype.draw=function(){console.log("ERROR: Calling unimplemented draw method on drawable object.")};
function Primitive(a){a=mergeWithDefault(a,{lineWidth:1,color:"black"});Drawable.call(this,a);this.lineWidth=a.lineWidth;this.color=a.color}Primitive.inheritsFrom(Drawable);function Text(a){a=mergeWithDefault(a,{content:"",fill:"black",font:"12pt Helvetica",height:12});Drawable.call(this,a);this.content=a.content;this.fill=a.fill;this.font=a.font;this.height=a.height}Text.inheritsFrom(Drawable);
Text.prototype.draw=function(a){a.fillStyle=this.fill;a.font=this.font;a.fillText(this.content,this.left,this.height)};function DoodleImage(a){a=mergeWithDefault(a,{width:-1,height:-1,src:""});Drawable.call(this,a);this.width=a.width;this.height=a.height;this.src=a.src}DoodleImage.inheritsFrom(Drawable);DoodleImage.prototype.draw=function(a){var c=new Image,b=this.left,d=this.top,e=this.width,f=this.height;c.src=this.src;e!=-1&&f!=-1?a.drawImage(c,b,d,e,f):a.drawImage(c,b,d)};
function Line(a){a=mergeWithDefault(a,{startX:0,startY:0,endX:0,endY:0});Primitive.call(this,a);this.startX=a.startX;this.startY=a.startY;this.endX=a.endX;this.endY=a.endY}Line.inheritsFrom(Primitive);Line.prototype.draw=function(a){a.beginPath();if(typeof this.lineWidth!="undefined")a.lineWidth=this.lineWidth;if(typeof this.color!="undefined")a.strokeStyle=this.color;a.moveTo(this.startX,this.startY);a.lineTo(this.endX,this.endY);a.closePath();a.stroke()};
function Path(a){a=mergeWithDefault(a,{type:"straight",points:[]});Primitive.call(this,a);this.type=a.type;this.points=a.points}Path.inheritsFrom(Primitive);
Path.prototype.draw=function(a){a.beginPath();a.moveTo(this.points[0].x,this.points[0].y);if(typeof this.lineWidth!="undefined")a.lineWidth=this.lineWidth;if(typeof this.color!="undefined")a.strokeStyle=this.color;switch(this.type){case "straight":for(var c=1;c<this.points.length;c++){var b=this.points[c];a.lineTo(b.x,b.y)}break;case "quadratic":for(c=1;c<this.points.length;c++)b=this.points[c],a.quadraticCurveTo(b.cp1x,b.cp1y,b.x,b.y);break;case "bezier":for(c=1;c<this.points.length;c++)b=this.points[c],
a.bezierCurveTo(b.cp1x,b.cp1y,b.cp2x,b.cp2y,b.x,b.y)}a.stroke()};function Arc(a){a=mergeWithDefault(a,{centerX:0,centerY:0,radius:0,startingTheta:0,endingTheta:0,counterclockwise:false});Primitive.call(this,a);this.centerX=a.centerX;this.centerY=a.centerY;this.radius=a.radius;this.startingTheta=a.startingTheta;this.endingTheta=a.endingTheta;this.counterclockwise=a.counterclockwise;this.left=a.centerX-a.radius;this.top=a.centerY-a.radius}Arc.inheritsFrom(Primitive);
Arc.prototype.draw=function(a){a.beginPath();if(typeof this.lineWidth!="undefined")a.lineWidth=this.lineWidth;if(typeof this.color!="undefined")a.strokeStyle=this.color;a.arc(this.centerX,this.centerY,this.radius,this.startingTheta,this.endingTheta,this.counterclockwise);a.stroke()};
function Container(a){a=mergeWithDefault(a,{width:100,height:100,fill:"",borderColor:"black",borderWidth:0});Drawable.call(this,a);this.children=[];this.width=a.width;this.height=a.height;this.fill=a.fill;this.borderColor=a.borderColor;this.borderWidth=a.borderWidth}Container.inheritsFrom(Drawable);
Container.prototype.draw=function(a){a.save();if(this.borderWidth!=0)a.lineWidth=this.borderWidth;a.translate(this.left,this.top);a.rotate(this.theta);a.beginPath();a.moveTo(0,0);a.lineTo(this.width,0);a.lineTo(this.width,this.height);a.lineTo(0,this.height);a.lineTo(0,0);a.closePath();if(this.fill!="")a.fillStyle=this.fill,a.fill();this.borderWidth!=0&&a.stroke();a.clip();for(var c=0;c<this.children.length;c++){var b=this.children[c];a.save();b.draw(a);a.restore()}a.restore()};
function PolygonContainer(a){a=mergeWithDefault(a,{radius:100,sides:3,centerX:100,centerY:100,polygonTheta:0});Container.call(this,a);this.radius=a.radius;this.sides=a.sides;this.centerX=a.centerX;this.centerY=a.centerY;this.polygonTheta=a.polygonTheta;this.left=a.centerX-a.radius;this.top=a.centerY-a.radius}PolygonContainer.inheritsFrom(Container);
PolygonContainer.prototype.draw=function(a){a.save();if(this.borderWidth!=0)a.lineWidth=this.borderWidth;if(typeof this.borderColor!="undefined")a.strokeStyle=this.borderColor;if(typeof this.fill!="undefined")a.fillStyle=this.fill;a.save();a.translate(this.centerX,this.centerY);a.rotate(-this.polygonTheta);var c=360/this.sides*(Math.PI/180);a.beginPath();a.moveTo(this.radius,0);for(var b=1;b<=this.sides;b++){var d=c*b,e=this.radius*Math.cos(d),d=this.radius*Math.sin(d);a.lineTo(e,d)}a.closePath();
a.fill();a.stroke();a.clip();a.restore();a.save();a.translate(this.left,this.top);for(b=0;b<this.children.length;b++)c=this.children[b],a.save(),c.draw(a),a.restore();a.restore();a.restore()};
var _canvas_width=600,_canvas_height=600,x_pos=_canvas_width/2,y_pos=_canvas_height/2,_doodle=void 0,_circle=void 0,_arrow=void 0,_time_step=15,_time_s_to_ms=_time_step/1E3,_gravity=3,_gravity_increment=_gravity*_time_s_to_ms,_x_per_sec=125,_y_per_sec=-5,_x_increment=_x_per_sec*_time_s_to_ms,_y_increment=_y_per_sec*_time_s_to_ms;
window.onload=function(){var a=document.getElementById("canvas"),c=a.getContext("2d");a.width=_canvas_width;a.height=_canvas_height;_doodle=new Doodle(c);_circle=new Arc({centerX:_canvas_width/2,centerY:_canvas_height/2,lineWidth:3,radius:10,startingTheta:0,endingTheta:Math.PI*2});_arrow=new Line({startX:0,startY:_canvas_width/2,endX:10,endY:_canvas_height/2-2});_doodle.children=[_arrow];_doodle.draw();a.addEventListener("mousemove",function(b){canvasMouseMove(a,b)});setInterval(updateAndDraw,_time_step)};
function canvasMouseMove(a,c){var b=a.getBoundingClientRect();_x_pos=(c.clientX-b.left)*(a.width/b.width);_y_pos=(c.clientY-b.top)*(a.width/b.width)}function updateAndDraw(){_doodle.context.clearRect(0,0,_canvas_width,_canvas_height);fallingCircle(_x_per_sec,_y_per_sec);_doodle.draw()}
function fallingCircle(){_arrow.startY<_canvas_height?(_y_per_sec+=_gravity_increment,_arrow.startX+=_x_increment,_arrow.endX+=_x_increment,_arrow.startY=_arrow.endY-_y_per_sec,_arrow.endY+=_y_per_sec):(_arrow.startX=0,_arrow.startY=_canvas_width/2,_arrow.endX=10,_arrow.endY=_canvas_width/2-2,_y_per_sec=-5)}
function followMouse(){Math.abs(_x_pos-_circle.centerX)>10&&(_x_pos>_circle.centerX?(_circle.centerX+=5,_circle.left+=5):(_circle.centerX-=5,_circle.left-=5));Math.abs(_y_pos-_circle.centerY)>5&&(_y_pos>_circle.centerY?(_circle.centerY+=5,_circle.top+=5):(_circle.centerY-=5,_circle.top-=5))};